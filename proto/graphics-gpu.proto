syntax = "proto3";

import "proto/graphics.proto";
import "proto/mosrpc-options.proto";
import "proto/mosrpc.proto";

message GpuQueryDisplayInfoRequest {
  string display_name = 1; // the name of the display to query
}

message GpuQueryDisplayInfoResponse {
  string        display_name = 1; // the name of the display
  graphics.Size size         = 2; // the size of the display
}

message GpuPostBufferRequest {
  string             display_name = 1; // the name of the display to post the buffer to
  graphics.Rectangle region       = 2; // the region of the display to post the buffer to
}

message GpuPostBufferResponse {
  mosrpc.result result = 1; // the result of the buffer posting
}

message MoveCursorRequest {
  string display_name = 1; // the name of the display to move the cursor on
  uint32 x            = 2; // x coordinate of the cursor
  uint32 y            = 3; // y coordinate of the cursor
}

message MoveCursorResponse {
  mosrpc.result result = 1; // the result of the cursor movement
}

service GraphicsManager {
  option (c_name) = "graphics_manager";
  rpc QueryDisplayInfo(GpuQueryDisplayInfoRequest) returns (GpuQueryDisplayInfoResponse);
  rpc PostBuffer(GpuPostBufferRequest) returns (GpuPostBufferResponse);
  // unused
  // rpc MoveCursor(MoveCursorRequest) returns (MoveCursorResponse);
}
